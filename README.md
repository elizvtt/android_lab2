# Лабораторна робота №2
### Завдання. Розробити мобільний додаток з наступним функціоналом.
1. Мобільний додаток складається з одного Activity, в якому розташований елемент ImageView та дві кнопки.
2. При натисканні на кнопку "Зробити селфі" повинно відкритися Activity додатку камери, в якому користувачу потрібно зробити селфі або зробити інший знімок.
3. Після підтвердження операції створення нового знімку, повинен знову відкритися користувацький додаток, причому, зроблений знімок повинен відобразитися в ImegeView.
4. Після того, як користувач отримав зображення, він може натиснути на кнопку відіслати селфі.
5. При настисканні на кнопку, повинно відкритися Activity створення нового листа електронної пошти додатку роботи з електронною поштою.
6. При відкритті вікна, у полі адреса відправника повинна бути додана адреса hodovychenko@op.edu.ua
7. При відкритті вікна, у полі теми листа бути додана тема "ANDROID [прізвище та ім'я]".
8. В тексті письма в додатках повинен бути доданий файл із селфі.
9. Після цього треба відіслати листа.
10. Також, в текст письма додати посилання на репозиторій із проєктом мобільного додатку.

#### Виконання роботи:
У файлі activity_main.xml створюємо інтерфес програми: дві кнопки та imageView. Друга кнопка "Відправити селфі" на початку заблокована `android:enabled="false"` та ії використання можливе тільки після того, як користувач зробить фотографію

![image](https://github.com/user-attachments/assets/fdc68825-f6a8-4491-892e-98220af8c9c8)

У файлі MainActivity.kt знаходится головна логіка додатку. Клас MainActivity спочатку ініціалізує елементи інтерфейсу: imageView та 2 кнопки. Після цього налаштування роботи з камерою. Перевіряється наявність дозволів до камери та файлової системи. Якщо дозволи надані - відкривається камера, та користувач може зробити фото, яке зберігаєтся в змінній capturedBitmap  і відображається в imageView. Після додавання фотографії кнопка стає активною, дозволяючи користувачеві відправити фото.

![image](https://github.com/user-attachments/assets/b1982138-6a53-4df3-ae09-d14f415d0473)

Кнопка "Відправити селфі" відкриває електронну пошту користувача за допомогою інтенту Intent.ACTION_SEND. Цей інтент дозволяє додавати текст, отримувача, тему та прикріплювати файл. Фото передається через URI, отриманий за допомогою FileProvider, який надає безпечний доступ до файлу.

![Снимок экрана 2025-04-08 162413](https://github.com/user-attachments/assets/f8142dac-2d14-4ec0-b9b1-493b720f4fb5)


У папці manifests у файлі AndroidManifest.xml надаємо доступи.

Доступ до камери: `<uses-permission android:name="android.permission.CAMERA"/>`

Доступ до файлової системи для читання та запису файлів:
`<uses-permission android:name="android.permission.READ_EXTERNAL_STORAGE"/>` та `<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>`

Визначаємо, що камера є обов'язковою:
`<uses-feature android:name="android.hardware.camera" android:required="true"/>`

Також додаємо безпечне надання доступу до файлів через FileProvider. Тобто, FileProvider обробляє доступ до файлів, створюючи тимчасові "URI", через які інші додатки можуть отримати доступ до файлів.
```
<provider
  android:name="androidx.core.content.FileProvider"
  android:authorities="com.example.lab2_palazova.fileprovider"
  android:exported="false"
  android:grantUriPermissions="true">
  <meta-data
    android:name="android.support.FILE_PROVIDER_PATHS"
    android:resource="@xml/file_paths"/>
</provider>
```

У папці res/xml створюємо файл file_paths.xml. Цей XML файл визначає шляхи до директорій, які можна використовувати для доступу до файлів у додатку. В даному випадку, цей файл налаштовує доступ до тимчасових файлів, які знаходяться у директорії external-cache. Тобто, тимчасові файли зберігаються в зовнішньому кеші додатку. Разом з FileProvider дозволяє створювати URI для файлів, які знаходяться в кеші, і надавати доступ до них іншим додаткам, не розголошуючи реальний шлях до цих файлів, що забезпечує безпеку та ізоляцію доступу до файлів.
```
<?xml version="1.0" encoding="utf-8"?>
<paths>
    <external-cache-path name="images" path="." />
</paths>
```
